<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gra online ‚Äì Procenty (klasa 6)</title>
<style>
body{
  font-family: Arial, sans-serif;
  margin:0;
  padding:10px;
  background:#f2f2f2;
  text-align:center;
}
h1{font-size:22px;}

.board{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:8px;
  margin:15px auto;
  max-width:420px;
}
.cell{
  height:70px;
  border:2px solid #333;
  border-radius:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:bold;
  background:#ecf0f1;
  position:relative;
}
.meta{background:#f1c40f;}

.pawn{
  position:absolute;
  bottom:6px;
  right:6px;
  font-size:24px;
}

.panel{
  background:#fff;
  padding:15px;
  border-radius:12px;
  max-width:420px;
  margin:auto;
}
button,input{
  width:100%;
  max-width:320px;
  font-size:16px;
  padding:10px;
  margin:6px 0;
}
</style>
</head>
<body>

<h1>üì± Gra online ‚Äì Procenty (klasa 6)</h1>
<p>Ka≈ºdy ruch = nowe zadanie</p>

<div class="panel">
  <button onclick="rollDice()">üé≤ Rzuƒá kostkƒÖ</button>
  <p id="dice"></p>
  <p id="question" style="font-weight:bold"></p>
  <input type="number" id="answer" placeholder="Twoja odpowied≈∫">
  <button onclick="checkAnswer()">Sprawd≈∫ odpowied≈∫</button>
  <p id="info"></p>
</div>

<div class="board" id="board"></div>

<script>
const size = 24;
let pos = 0;
let correct = null;
let waitingForAnswer = false;

function draw(){
  const b = document.getElementById('board');
  b.innerHTML='';
  for(let i=0;i<size;i++){
    const c=document.createElement('div');
    c.className='cell';
    if(i===size-1) c.classList.add('meta');
    c.textContent = i===size-1 ? 'META' : i+1;

    if(i===pos){
      const p=document.createElement('span');
      p.className='pawn';
      p.textContent='üö∂';
      c.appendChild(p);
    }
    b.appendChild(c);
  }
}

function generateQuestion(){
  const type=Math.floor(Math.random()*3);
  let q,a;

  if(type===0){
    const p=[10,20,25,50][Math.floor(Math.random()*4)];
    const x=[40,60,80,100,200][Math.floor(Math.random()*5)];
    q=`Ile to ${p}% z ${x}?`;
    a=x*p/100;
  }
  else if(type===1){
    const x=[40,50,80,100][Math.floor(Math.random()*4)];
    const p=[10,20,25][Math.floor(Math.random()*3)];
    q=`Podnie≈õ ${x} o ${p}%`;
    a=x + x*p/100;
  }
  else{
    const x=[50,80,100,200][Math.floor(Math.random()*4)];
    const p=[10,20,25][Math.floor(Math.random()*3)];
    q=`Obni≈º ${x} o ${p}%`;
    a=x - x*p/100;
  }

  correct=a;
  waitingForAnswer=true;
  document.getElementById('question').textContent=q;
  document.getElementById('info').textContent='';
  document.getElementById('answer').value='';
}

function rollDice(){
  if(waitingForAnswer) return;

  const d=Math.floor(Math.random()*6)+1;
  document.getElementById('dice').textContent='Wyrzuci≈Çe≈õ: '+d;

  pos+=d;
  if(pos>=size-1){
    pos=size-1;
    draw();
    document.getElementById('question').textContent='üéâ Gratulacje! Dotar≈Çe≈õ do METY!';
    correct=null;
    return;
  }

  draw();
  generateQuestion();
}

function checkAnswer(){
  if(!waitingForAnswer) return;

  const v=Number(document.getElementById('answer').value);
  if(v===correct){
    document.getElementById('info').textContent='‚úÖ Dobra odpowied≈∫! Rzuƒá ponownie.';
    waitingForAnswer=false;
  } else{
    document.getElementById('info').textContent='‚ùå Z≈Ça odpowied≈∫! Cofasz siƒô o 1 pole.';
    pos=Math.max(0,pos-1);
    waitingForAnswer=false;
    draw();
  }
}

draw();
</script>
</body>
</html>
